<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Meta Tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <title>Sito Schwarzenberger - Graphic Designer & Visual Artist | Digital Design & Visual Communication</title>
  <meta name="description" content="Award-winning graphic designer Sito Schwarzenberger creates innovative digital designs and visual art. Based in VIE, specializing in UI/UX, branding, and contemporary visual communication.">
  <meta name="keywords" content="graphic designer VIE, visual artist, digital design, brand identity, UI/UX design, contemporary art, visual communication, logo design">
  <meta name="author" content="Sito Schwarzenberger">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph Meta Tags (Facebook/LinkedIn) -->
  <meta property="og:title" content="Sito Schwarzenberger - Graphic Designer & Visual Artist">
  <meta property="og:description" content="Award-winning graphic designer creating innovative digital designs and visual art. Based in VIE, specializing in UI/UX, branding, and contemporary visual communication.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sitoform.com">
  <meta property="og:image" content="https://sitoform.com/images/sito-schwarzenberger-og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="SITOFORM">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Sito Schwarzenberger - VIE Graphic Designer & Visual Artist">
  <meta name="twitter:description" content="Award-winning graphic designer creating innovative digital designs and visual art. Based in VIE.">
  <meta name="twitter:image" content="https://sitoform.com/images/sito-schwarzenberger-twitter-card.jpg">
  <meta name="twitter:creator" content="@sitoschwarzenberger">
  <meta name="twitter:site" content="@sitoart">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://sitoform.com">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://sitoform.com/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="https://sitoform.com/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://sitoform.com/images/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://sitoform.com/images/apple-touch-icon.png">
  
<!-- Schema.org JSON-LD Structured Data -->
<script type="application/ld+json">
  {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Sito Schwarzenberger",
      "jobTitle": "Graphic Designer and Visual Artist",
      "description": "Award-winning graphic designer and visual artist specializing in digital design, UI/UX, and contemporary visual communication.",
      "url": "https://sitoform.com",
      "image": "https://sitoform.com/images/sito-schwarzenberger-profile.jpg",
      "worksFor": {
          "@type": "Organization",
          "name": "SITOFORM",
          "url": "https://sitoform.com"
      },
      "address": {
          "@type": "PostalAddress",
          "addressLocality": "Vienna",
          "@type": "PostalAddress",
          "addressRegion": "VIE",
          "addressCountry": "AT"
      },
      "sameAs": [
          "https://at.linkedin.com/in/sito-schwarzenberger-59aa5911",
          "https://sitoschwarzenberger.art",
          "https://www.saatchiart.com/sitosun"
      ],
      "knowsAbout": [
          "Graphic Design",
          "Visual Art",
          "UI/UX Design", 
          "Brand Identity",
          "Digital Design",
          "Contemporary Art",
          "Visual Communication"
      ],
      "alumniOf": {
          "@type": "CollegeOrUniversity",
          "name": "die Grafische Vienna"
      }
  }
  </script>
  
  <!-- Additional Schema for Creative Work -->
  <script type="application/ld+json">
  {
      "@context": "https://schema.org",
      "@type": "ProfessionalService",
      "name": "SITOFORM - Graphic Design Services",
      "description": "Professional graphic design and visual art services by Sito Schwarzenberger in New York City.",
      "url": "https://sitoform.com",
      
      "address": {
          "@type": "PostalAddress",
          "addressLocality": "Vienna",
          "addressRegion": "VIE",
          "addressCountry": "Austria"
      },
      "geo": {
          "@type": "GeoCoordinates",
          "latitude": 48.20849,
          "longitude": 16.37208
      },
      "serviceType": [
          "Graphic Design",
          "UI/UX Design",
          "Brand Identity",
          "Visual Communication",
          "Digital Art"
      ],
      "provider": {
          "@type": "Person",
          "name": "Sito Schwarzenberger"
      }
  }
  </script>


    
<!-- Hreflang for international SEO (if you have multiple language versions) -->
<link rel="alternate" hreflang="en" href="https://sitoform.com">
<link rel="alternate" hreflang="de" href="https://sitoform.com/de">

<!-- DNS Prefetch for performance -->
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//www.google-analytics.com">

<meta http-equiv="Content-Security-Policy" 
      content="script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://www.googletagmanager.com https://www.google-analytics.com">

<!-- Google Analytics (replace GA_MEASUREMENT_ID with your actual ID) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=42761845"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'GA_MEASUREMENT_ID');
</script>

  
  <!-- Load the local Tailwind CSS file -->
  <link href="/css/output.css" rel="stylesheet">
  <!-- Load the custom CSS file -->
  <link href="/css/style25.css" rel="stylesheet">
  <!-- Inter Font from Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;700&display=swap" rel="stylesheet">

<style>
  
</style>
</head>
<body>
  <!-- Hover Areas for Arrows -->
  <div class="hover-area hover-left" id="hover-left"></div>
  <div class="hover-area hover-right" id="hover-right"></div>

  <!-- Header Section -->
  <header class="w-full h-[133px] bg-[#343333] overflow-visible relative">
    <div class="header-content max-w-[1000px] mx-auto relative">
      <div class="header-top flex">
        <div class="logo">
          <a href="index.html">
            <img src="https://sitoform.com/logo/sito+RDA_logo01" alt="Logo" class="w-[210px] h-[75px]" />
          </a>
        </div>
        <div class="header-text-nav">
          <div class="header-text leading-tight">
            <p class="owner">SITO SCHWARZENBERGER</p>
            <p class="ownersub1">RADIKAL DESIGN</p>
            <p class="ownersub2">ALLIANCE</p>
          </div>
          <nav class="nav-links flex space-x-2">
            <a href="?page=biography" class="headerlinks hover:underline" id="biography-link">BIOGRAPHY</a>
            <a href="?page=contact" class="headerlinks hover:underline" id="contact-link">CONTACT</a>
            <a href="?page=visuals" class="headerlinks hover:underline" id="visuals-link">VISUALS</a>
          </nav>
        </div>
        <a href="https://sitoschwarzenberger.art" class="art-link artlink hover:underline">> ART</a>
      </div>
      <div class="blue-line"></div>
    </div>
  </header>

  <!-- Main Content (Home Page) -->
  <div id="main-content">
    <!-- Metadata Section -->
    <section class="w-full py-4 bg-[#343333]">
      <div class="metadata-container">
        <!-- Metadata Row -->
        <div class="metadata-section flex items-start">
          <div class="metadata-row">
            <!-- Total and Current Artwork Numbers -->
            <div class="metadata-item text-left">
              <div class="number-align">
                <p id="total-artworks" class="projectdata">0</p>
                <p id="artwork-number" class="projectdata"></p>
              </div>
            </div>
            <!-- Project -->
            <div class="metadata-item project-item">
              <div class="metadata-group">
                <div class="short-vertical-line"></div>
                <div class="text-wrapper">
                  <p class="category">PROJECT</p>
                  <p id="artwork-title" class="projectdata"></p>
                </div>
              </div>
            </div>
          </div>
          <!-- Year and Type Row -->
          <div class="year-type-row">
            <!-- Year -->
            <div class="metadata-item year-item">
              <div class="metadata-group">
                <div class="short-vertical-line"></div>
                <div class="text-wrapper">
                  <p class="category">YEAR</p>
                  <p id="artwork-year" class="projectdata"></p>
                </div>
              </div>
            </div>
            <!-- Type -->
            <div class="metadata-item type-item">
              <div class="metadata-group">
                <div class="short-vertical-line"></div>
                <div class="text-wrapper">
                  <p class="category">TYPE</p>
                  <p id="artwork-type" class="projectdata"></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Description -->
        <div class="description-wrapper">
          <div id="description"></div>
        </div>
        <!-- Arrows and Slider -->
        <div class="arrow-container">
          <div class="arrow-wrapper" id="arrow-left-wrapper">
            <img src="/images/nextArrow_01.svg" alt="Previous Arrow" class="arrow arrow-left" id="arrow-left">
          </div>
          <div class="slider-wrapper">
            <input type="range" id="artwork-slider" min="1" value="1" step="1">
          </div>
          <div class="arrow-wrapper" id="arrow-right-wrapper">
            <img src="/images/nextArrow_01.svg" alt="Next Arrow" class="arrow arrow-right" id="arrow-right">
          </div>
        </div>
      </div>
    </section>

    <section class="artwork-section">
      <div class="max-w-[1000px] mx-auto text-center">
        <div id="artwork-display" class="artwork-display">
          <div id="loading-spinner" class="absolute hidden">
            <svg class="animate-spin h-8 w-8 text-blue-500" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" stroke-dasharray="15 45" />
            </svg>
          </div>
          <div id="loading-progress" class="absolute hidden text-white text-lg font-semibold">
            <span id="progress-percentage">0%</span>
          </div>
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcgQXJ0d29yay4uLjwvdGV4dD48L3N2Zz4=" alt="Loading Artwork" id="artwork-image" />
          
        </div>
      </div>
    </section>
  </div>

  
  <!-- Biography Content -->
  <div id="biography-content" class="hidden">
    <section class="w-full py-8 bg-[#343333]">
      <div class="bio-container">
        <!-- Bio Section -->
        <div class="bio-section">
          <div class="bio-image-container">
            <div class="bio-image-bg"></div>
            <img src="https://sitoform.com/images/portrait/sitoIMG_1661_B4.jpg?width=800&quality=75" alt="Sito Schwarzenberger" class="bio-image">
          </div>
          <div class="bio-text-column">
            <div class="bio-text">
              <p>
                I was born on the 26th of July in 1976 in Graz. Shortly afterwards my parents moved from Vienna to a farm at 
                the “Mostviertel” where we experienced a kind of self-sufficient life between contemporary art and nature. 
                Being artistic and being driven to apply design to function never left my mind since then. 
                In 2010 my son named Juni was born. Let's make more good design!
              </p>
            </div>
            <div class="social-links">
              <a href="https://www.instagram.com/sitoform/" target="_blank">
                <img src="https://sitoform.com/images/portrait/insta_icon01.svg" alt="Instagram" class="social-icon">
              </a>
              <a href="https://x.com/sitoart" target="_blank">
                <img src="https://sitoform.com/images/portrait/x_icon01.svg" alt="X" class="social-icon">
              </a>
            </div>
          </div>
        </div>
        <div class="bio-line"></div>
        <!-- Diploma Section -->
        <div class="diploma-section">
          <div class="diploma-image-container">
            <img src="https://sitoform.com/images/portrait/sito_diploma_work_cover01.jpg?width=800&quality=75" alt="Diploma Work Cover" class="diploma-image">
          </div>
          <div class="diploma-text">
            <h2 class="text-xl font-bold">Diploma Thesis</h2>
            <p class="text-lg font-light">Media Theory</p>
            <p class="text-lg font-light">
              PDF: <a href="https://sitoform.com/pdf/Schwarzenberger_Wie_Bild-Symbole_die_Oeffentlichkeit_beeinflussen.pdf" target="_blank" class="underline hover:text-[#009FE3]">Download</a>
            </p>
          </div>
        </div>
        <div class="bio-line"></div>
        <!-- Interview Section -->
        <div class="interview-section">
          <h2 class="text-xl font-bold">Interview</h2>
          <p class="text-lg font-light">
            <a href="https://sitoform.com/pdf/computerarts_vj_sitosun.pdf" target="_blank" class="underline hover:text-[#009FE3]">Chinese Computer Arts magazine, 2009</a>
          </p>
        </div>
        <div class="bio-line"></div>
        <!-- Award Section -->
        <div class="award-section">
          <h2 class="text-xl font-bold">Appreciation Award for Graphic Design</h2>
          <p class="text-lg font-light">from the Lower-Austria Cultural Department, Cultural Awards 2009</p>
        </div>
      </div>
    </section>
  </div>

  <!-- Visuals Content (Placeholder) -->
  <div id="visuals-content" class="hidden">
    <div class="spinner">
      <div class="spinner-circle"></div>
    
    </div>


  </div>
  <!-- Contact Content -->
  <div id="contact-content" class="hidden">
    <section class="w-full py-8 bg-[#343333]">
      <div class="contact-container">
        <div class="contact-text">
          <p>
            Offenlegung gemäß § 25 Mediengesetz für kleine Webseiten<br>
            Medieninhaber und für den Inhalt verantwortlich<br>
            Sito Schwarzenberger<br>
            AUSTRIA<br>
            1050 WIEN<br>
            Genaue Adresse auf Anfrage<br>
            E-Mail: <a href="mailto:sitoform@gmail.com">sitoform@gmail.com</a>
          </p>
          <div class="legal-button" id="legal-button">Datenschutzerklärung</div>
          <div class="legal-text" id="legal-text">
            <h1>Datenschutzerklärung</h1>
            <h2>1. Allgemeine Hinweise</h2>
            <p>
              Diese Datenschutzerklärung informiert Sie darüber, wie wir mit Ihren personenbezogenen Daten umgehen, wenn Sie unsere Website unter <a href="https://sitoform.com">https://sitoform.com</a> besuchen. Personenbezogene Daten sind alle Daten, mit denen Sie persönlich identifiziert werden können.
            </p>
            <h2>2. Verantwortliche Stelle</h2>
            <p>
              Verantwortlich für die Datenverarbeitung ist:<br>
              <strong>Sito Schwarzenberger</strong><br>
              1050 Wien, Österreich<br>
              (Genaue Adresse auf Anfrage)<br>
              E-Mail: <a href="mailto:sitoform@gmail.com">sitoform@gmail.com</a>
            </p>
            <h2>3. Datenerfassung auf unserer Website</h2>
            <h3>Wie erfassen wir Ihre Daten?</h3>
            <p>
              Ihre Daten werden erhoben, wenn Sie uns diese freiwillig mitteilen, z. B. durch Kontaktanfragen per E-Mail. Automatisch erfassen wir technische Daten (z. B. IP-Adresse, Browser, Uhrzeit des Zugriffs) in Server-Log-Dateien, um die Website bereitzustellen.
            </p>
            <h3>Wofür nutzen wir Ihre Daten?</h3>
            <ul>
              <li><strong>Server-Logs</strong>: Zur Sicherstellung der technischen Funktionalität und Sicherheit der Website (Art. 6 Abs. 1 lit. f DSGVO).</li>
              <li><strong>Kontaktanfragen</strong>: Zur Bearbeitung Ihrer Anfragen (Art. 6 Abs. 1 lit. b DSGVO oder Art. 6 Abs. 1 lit. f DSGVO).</li>
            </ul>
            <h3>Speicherdauer</h3>
            <p>
              Daten aus Kontaktanfragen speichern wir, bis der Zweck erfüllt ist oder Sie die Löschung verlangen, sofern keine gesetzlichen Aufbewahrungspflichten bestehen. Server-Logs werden nach maximal 30 Tagen gelöscht.
            </p>
            <h2>4. Hosting</h2>
            <p>
              Unsere Website wird bei Render (Render, Inc., USA) gehostet. Personenbezogene Daten (z. B. IP-Adressen, Zugriffsdaten) werden auf den Servern von Render gespeichert. Dies erfolgt im Interesse einer sicheren und effizienten Website-Bereitstellung (Art. 6 Abs. 1 lit. f DSGVO). Render verarbeitet Daten nur nach unseren Weisungen.
            </p>
            <p>
              Datenverarbeitung außerhalb der EU: Render ist in den USA ansässig. Wir haben mit Render Vereinbarungen zur Einhaltung der DSGVO abgeschlossen (Standardvertragsklauseln).
            </p>
            <h2>5. Ihre Rechte</h2>
            <p>
              Sie haben folgende Rechte bezüglich Ihrer personenbezogenen Daten:
            </p>
            <ul>
              <li>Auskunft über gespeicherte Daten (Art. 15 DSGVO).</li>
              <li>Berichtigung unrichtiger Daten (Art. 16 DSGVO).</li>
              <li>Löschung, sofern keine gesetzlichen Gründe entgegenstehen (Art. 17 DSGVO).</li>
              <li>Einschränkung der Verarbeitung (Art. 18 DSGVO).</li>
              <li>Datenübertragbarkeit (Art. 20 DSGVO).</li>
              <li>Widerspruch gegen die Verarbeitung (Art. 21 DSGVO).</li>
            </ul>
            <p>
              Kontaktieren Sie uns unter <a href="mailto:sitoform@gmail.com">sitoform@gmail.com</a>. Sie können sich auch bei einer Aufsichtsbehörde beschweren, z. B. der österreichischen Datenschutzbehörde (<a href="https://www.dsb.gv.at">dsb.gv.at</a>).
            </p>
            <h2>6. SSL/TLS-Verschlüsselung</h2>
            <p>
              Unsere Website verwendet SSL/TLS-Verschlüsselung (https://) zum Schutz Ihrer Daten während der Übertragung.
            </p>
            <h2>7. Third-Party Services</h2>
            <h3>YouTube Video Embeds</h3>
            <p>
              Our website includes embedded YouTube videos to showcase visual content. These videos are embedded in a manner that respects user privacy. When you view a page with an embedded YouTube video, a connection is established with YouTube's servers (operated by Google LLC, USA). This may result in the processing of data such as your IP address or device information by YouTube. We embed videos in a way that minimizes data collection, but YouTube may still collect data as outlined in their <a href="https://policies.google.com/privacy">Privacy Policy</a>. The legal basis for this is our legitimate interest in providing engaging visual content (Art. 6 Abs. 1 lit. f DSGVO). You can avoid data processing by not viewing pages with embedded videos.
            </p>
            <h3>No Cookies or Other Analysis Tools</h3>
            <p>
              Apart from the YouTube embeds described above, our website does not use cookies or other analysis tools, unless explicitly stated otherwise.
            </p>
            <h2>8. Änderungen der Datenschutzerklärung</h2>
            <p>
              Wir behalten uns vor, diese Datenschutzerklärung anzupassen, um sie an geänderte rechtliche Anforderungen anzupassen. Die aktuelle Version finden Sie stets auf unserer Website.
            </p>
            <p>
              Stand: Mai 2025
            </p>
          </div>
        </div>
      </div>
    </section>
  </div>


  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    let artworks = [];
    let currentIndex = 0;
    const typingTimeouts = new Map();
    const imageCache = new Map();
    let progressTimeout = null; // Store progress timeout
    let typewriterHeaderInitialized = false; // Flag to prevent typewriter restart
    let toggleContentInitialized = false; // Flag to prevent double toggleContent
  
    // DOM elements
    const totalArtworks = document.getElementById('total-artworks');
    const artworkNumber = document.getElementById('artwork-number');
    const artworkTitle = document.getElementById('artwork-title');
    const artworkYear = document.getElementById('artwork-year');
    const artworkType = document.getElementById('artwork-type');
    const description = document.getElementById('description');
    const artworkDisplay = document.getElementById('artwork-display');
    const artworkImage = document.getElementById('artwork-image');
    const loadingSpinner = document.getElementById('loading-spinner');
    const loadingProgress = document.getElementById('loading-progress');
    const progressPercentage = document.getElementById('progress-percentage');
    const arrowLeft = document.getElementById('arrow-left');
    const arrowRight = document.getElementById('arrow-right');
    const arrowLeftWrapper = document.getElementById('arrow-left-wrapper');
    const arrowRightWrapper = document.getElementById('arrow-right-wrapper');
    const hoverLeft = document.getElementById('hover-left');
    const hoverRight = document.getElementById('hover-right');
    const artworkSection = document.querySelector('.artwork-section');
    const metadataSection = document.querySelector('.w-full.py-4');
    const artworkSlider = document.getElementById('artwork-slider');
    const arrowContainer = document.querySelector('.arrow-container');
    const blueLine = document.querySelector('.blue-line');
    const mainContent = document.getElementById('main-content');
    const biographyContent = document.getElementById('biography-content');
    const visualsContent = document.getElementById('visuals-content');
    const contactContent = document.getElementById('contact-content');
    const biographyLink = document.getElementById('biography-link');
    const contactLink = document.getElementById('contact-link');
    const visualsLink = document.getElementById('visuals-link');
    const legalButton = document.getElementById('legal-button');
    const legalText = document.getElementById('legal-text');
  
    // New typewriter function for header (#typewriter)
    function typewriterHeader(element, text, speed = 100, delay = 1500) {
      if (typewriterHeaderInitialized) {
        console.log('Typewriter header already initialized, skipping for:', element.id);
        return;
      }
      typewriterHeaderInitialized = true;
      console.log('Typewriter header started for:', element.id, 'with text:', text);
      let i = 0;
      element.textContent = '';
      setTimeout(() => {
        const interval = setInterval(() => {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
          } else {
            clearInterval(interval);
            console.log('Typewriter header finished for:', element.id);
          }
        }, speed);
      }, delay);
    }
  
    // Toggle legal text visibility
    legalButton.addEventListener('click', () => {
      const isHidden = legalText.style.display === 'none' || !legalText.style.display;
      legalText.style.display = isHidden ? 'block' : 'none';
      console.log('Legal text toggled:', legalText.style.display);
    });
  
    // Toggle content based on URL param
    function toggleContent() {
      if (toggleContentInitialized) {
        console.log('toggleContent already initialized, skipping');
        return;
      }
      toggleContentInitialized = true;
      console.log('toggleContent started');
      const params = new URLSearchParams(window.location.search);
      const page = params.get('page') || '';
      mainContent.classList.add('hidden');
      biographyContent.classList.add('hidden');
      visualsContent.classList.add('hidden');
      contactContent.classList.add('hidden');
      biographyLink.classList.remove('active');
      contactLink.classList.remove('active');
      visualsLink.classList.remove('active');
      hoverLeft.classList.remove('hidden');
      hoverRight.classList.remove('hidden');
  
      if (page === 'biography') {
        biographyContent.classList.remove('hidden');
        biographyLink.classList.add('active');
        hoverLeft.classList.add('hidden');
        hoverRight.classList.add('hidden');
        preloadBioImages();
        console.log('Biography page loaded');
      } else if (page === 'visuals') {
        visualsContent.classList.remove('hidden');
        visualsLink.classList.add('active');
        hoverLeft.classList.add('hidden');
        hoverRight.classList.add('hidden');
        console.log('Visuals page loading...');
        visualsContent.innerHTML = '<div class="spinner"><div class="spinner-circle"></div></div>';
        fetch('https://sitoform.com/visuals.html') // Adjust path if needed
          .then(response => {
            console.log('Fetch response status:', response.status, response.statusText);
            if (!response.ok) throw new Error(`Failed to load visuals.html: ${response.status} ${response.statusText}`);
            return response.text();
          })
          .then(html => {
            visualsContent.innerHTML = html;
            console.log('Visuals content loaded');
            preloadVisualsContent();
          })
          .catch(error => {
            console.error('Error loading visuals content:', error);
            visualsContent.innerHTML = '<p>Error loading visuals. Please try again later.</p>';
          });
      } else if (page === 'contact') {
        contactContent.classList.remove('hidden');
        contactLink.classList.add('active');
        hoverLeft.classList.add('hidden');
        hoverRight.classList.add('hidden');
        console.log('Contact page loaded');
      } else {
        mainContent.classList.remove('hidden');
        fetchArtworks();
        console.log('Home page loaded');
        // Initialize typewriter for home page only
        const typewriterElement = document.getElementById('typewriter');
        if (typewriterElement && !typewriterHeaderInitialized) {
          typewriterHeader(typewriterElement, 'Sito Schwarzenberger', 100, 1500);
        }
      }
      console.log('toggleContent finished');
    }
  

    function preloadVisualsContent() {
console.log('preloadVisualsContent started');
const isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);
const maxConcurrentLoads = isMobile ? 1 : 2;
const lazyImages = document.querySelectorAll('.visuals-image.lazy');
console.log('Found lazy images:', lazyImages.length);

if (lazyImages.length === 0) {
console.warn('No lazy images found');
return;
}

const resourceObserver = new IntersectionObserver(
(entries, observer) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
const img = entry.target;
const src = img.getAttribute('data-src');
if (src) {
console.log('Attempting to load:', src);
const tempImg = new Image();
tempImg.src = src;
tempImg.onload = () => {
console.log('Loaded image:', src);
img.src = src;
img.classList.remove('lazy');
};
tempImg.onerror = (err) => {
console.error('Failed to load image:', src, 'Error:', err);
img.src = 'https://sitoform.com/img/visuals/placeholder.jpg';
img.alt = 'Failed to load image';
img.classList.remove('lazy');
const parent = img.closest('.visuals-item');
if (parent && parent.querySelector('.video-fallback')) {
parent.querySelector('.video-fallback').classList.remove('hidden');
}
};
} else {
console.error('No data-src for image:', img);
img.src = 'https://sitoform.com/img/visuals/placeholder.jpg';
img.alt = 'No image available';
img.classList.remove('lazy');
}
observer.unobserve(img);
}
});
},
{ rootMargin: '0px 0px 200px 0px', threshold: 0.01 }
);

lazyImages.forEach(img => {
console.log('Observing image:', img.getAttribute('data-src'));
resourceObserver.observe(img);
});
}


  
    // Navigation link handlers
    biographyLink.addEventListener('click', (e) => {
      e.preventDefault();
      history.pushState(null, '', '?page=biography');
      toggleContentInitialized = false; // Allow toggleContent to run
      toggleContent();
    });
    contactLink.addEventListener('click', (e) => {
      e.preventDefault();
      history.pushState(null, '', '?page=contact');
      toggleContentInitialized = false; // Allow toggleContent to run
      toggleContent();
    });
    visualsLink.addEventListener('click', (e) => {
      e.preventDefault();
      history.pushState(null, '', '?page=visuals');
      toggleContentInitialized = false; // Allow toggleContent to run
      toggleContent();
    });
  
    // Handle popstate for back/forward navigation
    window.addEventListener('popstate', () => {
      toggleContentInitialized = false; // Allow toggleContent to run
      toggleContent();
    });
  
    // Preload biography images
    function preloadBioImages() {
      const bioImages = [
        'https://sitoform.com/images/portrait/sitoIMG_1661_B4.jpg?width=800&quality=75',
        'https://sitoform.com/images/portrait/sito_diploma_work_cover01.jpg?width=800&quality=75',
        'https://sitoform.com/images/portrait/insta_icon01.svg',
        'https://sitoform.com/images/portrait/x_icon01.svg'
      ];
      bioImages.forEach(url => {
        if (!imageCache.has(url)) {
          const img = new Image();
          img.src = url;
          img.onload = () => {
            imageCache.set(url, url);
            console.log('Preloaded bio image:', url);
          };
          img.onerror = () => console.error('Error preloading bio image:', url);
        }
      });
    }
  
    // Observe description content changes
    const descriptionObserver = new MutationObserver(() => {
      console.log('Description observer triggered');
      if (mainContent.classList.contains('hidden')) return;
      adjustLayoutBasedOnDescription();
    });
    descriptionObserver.observe(description, { childList: true, characterData: true, subtree: true });
  
    // Supabase client
    const supabaseUrl = 'https://ydfkrwjafnuvdvezpkcp.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkZmtyd2phZm51dmR2ZXpwa2NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUxNzA0MTUsImV4cCI6MjA2MDc0NjQxNX0.kHzI8KRGFBRrLpFVvJfK2JP_P2a9nRJzDBm5h235eJw';
    const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);
  
    // Debounce function
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
  
    // Navigation functions
    const debouncedSwipeLeft = debounce(() => {
      if (currentIndex <= 0) return;
      currentIndex--;
      showSpinner();
      loadImageWithProgress(artworks[currentIndex].imageurl || 'https://via.placeholder.com/300?text=No+Image', updateArtwork);
    }, 100);
  
    const debouncedSwipeRight = debounce(() => {
      if (currentIndex >= artworks.length - 1) return;
      currentIndex++;
      showSpinner();
      loadImageWithProgress(artworks[currentIndex].imageurl || 'https://via.placeholder.com/300?text=No+Image', updateArtwork);
    }, 100);
  
    // Slider input handler
    let debounceTimeout;
    artworkSlider.addEventListener('input', (e) => {
      clearTimeout(debounceTimeout);
      debounceTimeout = setTimeout(() => {
        const newIndex = parseInt(e.target.value) - 1;
        if (newIndex !== currentIndex) {
          currentIndex = newIndex;
          showSpinner();
          loadImageWithProgress(artworks[currentIndex].imageurl || 'https://via.placeholder.com/300?text=No+Image', updateArtwork);
        }
      }, 100);
    });
  
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.keyCode === 37) debouncedSwipeLeft();
      else if (e.keyCode === 39) debouncedSwipeRight();
    });
  
    // Load image with progress
    function loadImageWithProgress(url, callback) {
      const optimizedUrl = `${url}?width=800&quality=75`;
      console.log('Loading image:', optimizedUrl);
  
      if (imageCache.has(optimizedUrl)) {
        console.log('Using cached image:', optimizedUrl);
        artworkImage.src = imageCache.get(optimizedUrl);
        hideSpinner();
        hideProgress();
        callback();
        return;
      }
  
      const xhr = new XMLHttpRequest();
      xhr.open('GET', optimizedUrl, true);
      xhr.responseType = 'blob';
  
      xhr.onprogress = (event) => {
        if (event.lengthComputable) {
          const percentComplete = Math.round((event.loaded / event.total) * 100);
          progressPercentage.textContent = `${percentComplete}%`;
          showProgress();
          console.log(`Image loading progress: ${percentComplete}%`);
        }
      };
  
      xhr.onload = () => {
        if (xhr.status === 200) {
          const blob = xhr.response;
          const objectUrl = URL.createObjectURL(blob);
          imageCache.set(optimizedUrl, objectUrl);
          artworkImage.src = objectUrl;
          hideSpinner();
          hideProgress();
          callback();
        } else {
          console.error('Error loading image:', xhr.status);
          artworkImage.src = 'https://via.placeholder.com/300?text=Error';
          hideSpinner();
          hideProgress();
          callback();
        }
      };
  
      xhr.onerror = () => {
        console.error('Error loading image:', optimizedUrl);
        artworkImage.src = 'https://via.placeholder.com/300?text=Error';
        hideSpinner();
        hideProgress();
        callback();
      };
  
      showSpinner();
      xhr.send();
    }
  
    // Preload adjacent images
    function preloadImages() {
      const indicesToPreload = [
        currentIndex - 1 >= 0 ? currentIndex - 1 : null,
        currentIndex + 1 < artworks.length ? currentIndex + 1 : null
      ].filter(i => i !== null);
  
      indicesToPreload.forEach(index => {
        const url = artworks[index].imageurl || 'https://via.placeholder.com/300?text=No+Image';
        const optimizedUrl = `${url}?width=800&quality=75`;
        if (!imageCache.has(optimizedUrl)) {
          const img = new Image();
          img.src = optimizedUrl;
          img.onload = () => {
            imageCache.set(optimizedUrl, optimizedUrl);
            console.log('Preloaded image:', optimizedUrl);
          };
          img.onerror = () => console.error('Error preloading image:', optimizedUrl);
        }
      });
    }
  
    function showSpinner() {
      artworkDisplay.classList.add('loading-active');
      artworkDisplay.classList.remove('progress-visible');
      if (!artworkDisplay.contains(loadingSpinner)) {
        artworkDisplay.appendChild(loadingSpinner);
      }
      if (!artworkDisplay.contains(loadingProgress)) {
        artworkDisplay.appendChild(loadingProgress);
      }
      if (!artworkDisplay.contains(artworkImage)) {
        artworkDisplay.appendChild(artworkImage);
      }
      const spinnerSvg = loadingSpinner.querySelector('svg');
      if (spinnerSvg) {
        spinnerSvg.style.animation = 'none';
        spinnerSvg.offsetHeight;
        spinnerSvg.style.animation = 'spin 1s linear infinite';
      }
      console.log('Showing spinner, animation applied:', spinnerSvg?.style.animation);
    }
  
    function hideSpinner() {
      artworkDisplay.classList.remove('loading-active');
      artworkDisplay.classList.remove('progress-visible');
      console.log('Hiding spinner');
    }
  
    function showProgress() {
      clearTimeout(progressTimeout);
      progressTimeout = setTimeout(() => {
        if (artworkDisplay.classList.contains('loading-active')) {
          artworkDisplay.classList.add('progress-visible');
          console.log('Showing progress');
        }
      }, 300);
    }
  
    function hideProgress() {
      clearTimeout(progressTimeout);
      artworkDisplay.classList.remove('progress-visible');
      progressPercentage.textContent = '0%';
      console.log('Hiding progress, display:', loadingProgress.style.display);
    }
  
    function adjustArtworkHeightAndScale() {
      if (mainContent.classList.contains('hidden')) return;
      const headerHeight = document.querySelector('header').offsetHeight;
      const metadataHeight = metadataSection.offsetHeight;
      const viewportHeight = window.innerHeight;
      const paddingTotal = parseInt(getComputedStyle(artworkDisplay).paddingTop) + parseInt(getComputedStyle(artworkDisplay).paddingBottom);
      const availableHeight = viewportHeight - headerHeight - metadataHeight - 20;
      const minHeight = window.innerWidth <= 768 ? 150 : 200;
  
      const sectionHeight = Math.max(minHeight, availableHeight);
      artworkSection.style.height = `${sectionHeight}px`;
  
      if (artworkImage.naturalWidth && artworkImage.naturalHeight) {
        const containerWidth = artworkSection.offsetWidth - (parseInt(getComputedStyle(artworkDisplay).paddingLeft) + parseInt(getComputedStyle(artworkDisplay).paddingRight));
        const containerHeight = sectionHeight - paddingTotal;
  
        const widthScale = containerWidth / artworkImage.naturalWidth;
        let scaledHeight = artworkImage.naturalHeight * widthScale;
  
        if (scaledHeight > containerHeight) {
          const heightScale = containerHeight / scaledHeight;
          scaledHeight = containerHeight;
          const scaledWidth = artworkImage.naturalWidth * widthScale * heightScale;
          artworkImage.style.maxWidth = `${scaledWidth}px`;
          artworkImage.style.maxHeight = `${scaledHeight}px`;
        } else {
          artworkImage.style.maxWidth = `${containerWidth}px`;
          artworkImage.style.maxHeight = 'none';
        }
      }
  
      logSectionHeight();
      adjustLayoutBasedOnDescription();
    }
  
    function logSectionHeight() {
      if (mainContent.classList.contains('hidden')) return;
      const containerHeight = artworkSection.offsetHeight;
      const displayHeight = artworkDisplay.offsetHeight;
      const imageHeight = artworkImage.clientHeight;
      const naturalHeight = artworkImage.naturalHeight;
      const scale = artworkImage.clientWidth / artworkImage.naturalWidth || 0;
      const expectedHeight = naturalHeight * scale;
      const bottomVisible = imageHeight + artworkImage.offsetTop <= containerHeight;
      const topVisible = artworkImage.offsetTop >= 0;
  
      console.log('Viewport height:', window.innerHeight);
      console.log('Header height:', document.querySelector('header').offsetHeight);
      console.log('Metadata height:', metadataSection.offsetHeight);
      console.log('Artwork section dimensions:', artworkSection.offsetWidth, 'x', containerHeight);
      console.log('Artwork display dimensions:', artworkDisplay.offsetWidth, 'x', displayHeight);
      console.log('Image dimensions:', artworkImage.clientWidth, 'x', imageHeight);
      console.log('Image natural dimensions:', artworkImage.naturalWidth, 'x', naturalHeight);
      console.log('Image scale:', scale, 'Expected height:', expectedHeight);
      console.log('Image top offset:', artworkImage.offsetTop, 'Container padding:', getComputedStyle(artworkDisplay).padding);
      console.log('Top visible:', topVisible, 'Bottom visible:', bottomVisible, 'Overall visible:', artworkImage.offsetWidth > 0 && artworkImage.offsetHeight > 0);
    }
  
    function adjustLayoutBasedOnDescription() {
      if (mainContent.classList.contains('hidden')) return;
      const description = document.getElementById('description');
      const artworkSection = document.querySelector('.artwork-section');
      const arrowContainer = document.querySelector('.arrow-container');
  
      if (!description || !artworkSection || !arrowContainer) {
        console.error('Missing elements:', { description, artworkSection, arrowContainer });
        return;
      }
  
      const computedStyle = getComputedStyle(description);
      const fontSize = parseFloat(computedStyle.fontSize) || 12;
      const lineHeight = parseFloat(computedStyle.lineHeight) || fontSize * (window.innerWidth <= 768 ? 1.4 : 1.6);
      const descriptionHeight = description.offsetHeight || 0;
  
      const lineCount = Math.min(Math.round(descriptionHeight / lineHeight) || 1, 6);
  
      const estimatedGap = descriptionHeight + parseFloat(arrowContainer.style.bottom || getComputedStyle(arrowContainer).bottom);
  
      console.log('Adjusting layout:', {
        viewportWidth: window.innerWidth,
        fontSize,
        lineHeight,
        descriptionHeight,
        lineCount,
        isMobile: window.innerWidth <= 768,
        isTablet: window.innerWidth > 768 && window.innerWidth <= 999,
        isDesktop: window.innerWidth > 999,
        estimatedGap
      });
  
      const isMobile = window.innerWidth <= 768;
      const isTablet = window.innerWidth > 768 && window.innerWidth <= 999;
      const isDesktop = window.innerWidth > 999;
  
      if (isDesktop) {
        let artworkSectionMarginTop = 0;
        let arrowContainerBottom = 12;
        let marginAdjustment = 0;
        let arrowAdjustment = 0;
        if (lineCount <= 1) {
          marginAdjustment = -20;
          arrowAdjustment = 38;
        } else if (lineCount === 2) {
          marginAdjustment = -15;
          arrowAdjustment = 8;
        } else if (lineCount === 3) {
          marginAdjustment = -10;
          arrowAdjustment = -2;
        } else if (lineCount === 4) {
          marginAdjustment = -5;
          arrowAdjustment = -7;
        } else if (lineCount >= 5) {
          marginAdjustment = 0;
          arrowAdjustment = -12;
        }
        artworkSectionMarginTop += marginAdjustment;
        arrowContainerBottom += arrowAdjustment;
        artworkSection.style.marginTop = `${artworkSectionMarginTop}px`;
        arrowContainer.style.bottom = `${arrowContainerBottom}px`;
        console.log(`Desktop - Lines: ${lineCount}, Margin Adjustment: ${marginAdjustment}px, Margin-top: ${artworkSectionMarginTop}px, Arrow Adjustment: ${arrowAdjustment}px, Arrow Bottom: ${arrowContainerBottom}px, Estimated Gap: ${estimatedGap}px`);
      } else if (isTablet) {
        let artworkSectionMarginTop = -60;
        let arrowContainerBottom = 12;
        let marginAdjustment = 0;
        let arrowAdjustment = 0;
        if (lineCount <= 1) {
          marginAdjustment = 10;
          arrowAdjustment = 38;
        } else if (lineCount === 2) {
          marginAdjustment = 15;
          arrowAdjustment = 8;
        } else if (lineCount === 3) {
          marginAdjustment = 20;
          arrowAdjustment = -2;
        } else if (lineCount === 4) {
          marginAdjustment = 25;
          arrowAdjustment = -7;
        } else if (lineCount >= 5) {
          marginAdjustment = 30;
          arrowAdjustment = -12;
        }
        artworkSectionMarginTop += marginAdjustment;
        arrowContainerBottom += arrowAdjustment;
        artworkSection.style.marginTop = `${artworkSectionMarginTop}px`;
        arrowContainer.style.bottom = `${arrowContainerBottom}px`;
        console.log(`Tablet - Lines: ${lineCount}, Margin Adjustment: ${marginAdjustment}px, Margin-top: ${artworkSectionMarginTop}px, Arrow Adjustment: ${arrowAdjustment}px, Arrow Bottom: ${arrowContainerBottom}px, Estimated Gap: ${estimatedGap}px`);
      } else if (isMobile) {
        let artworkSectionMarginTop = 20;
        let arrowContainerBottom = -42;
        let marginAdjustment = 0;
        let arrowAdjustment = 0;
        if (lineCount <= 1) {
          marginAdjustment = -65;
          arrowAdjustment = -5;
        } else if (lineCount === 2) {
          marginAdjustment = -60;
          arrowAdjustment = -3;
        } else if (lineCount === 3) {
          marginAdjustment = -50;
          arrowAdjustment = 0;
        } else if (lineCount === 4) {
          marginAdjustment = -40;
          arrowAdjustment = -5;
        } else if (lineCount >= 5) {
          marginAdjustment = -30;
          arrowAdjustment = -10;
        }
        artworkSectionMarginTop += marginAdjustment;
        arrowContainerBottom += arrowAdjustment;
        artworkSection.style.marginTop = `${artworkSectionMarginTop}px`;
        arrowContainer.style.bottom = `${arrowContainerBottom}px`;
        console.log(`Mobile - Lines: ${lineCount}, Margin Adjustment: ${marginAdjustment}px, Margin-top: ${artworkSectionMarginTop}px, Arrow Adjustment: ${arrowAdjustment}px, Arrow Bottom: ${arrowContainerBottom}px, Estimated Gap: ${estimatedGap}px`);
      }
    }
  
    window.addEventListener('resize', () => {
      console.log('Resize event triggered');
      adjustArtworkHeightAndScale();
    });
  
    // Use DOMContentLoaded for faster initialization
    window.addEventListener('DOMContentLoaded', () => {
      console.log('DOMContentLoaded event triggered');
      toggleContent();
      adjustArtworkHeightAndScale();
    });
  
    artworkImage.addEventListener('load', () => {
      console.log('Image loaded, progress state:', {
        loadingActive: artworkDisplay.classList.contains('loading-active'),
        progressVisible: artworkDisplay.classList.contains('progress-visible'),
        progressDisplay: getComputedStyle(loadingProgress).display,
        progressText: progressPercentage.textContent
      });
      adjustArtworkHeightAndScale();
    });
  
    function typeWriter(element, text, speed = 50, callback) {
      if (typingTimeouts.has(element)) {
        clearTimeout(typingTimeouts.get(element));
        typingTimeouts.delete(element);
      }
      element.textContent = '';
      let i = 0;
      console.log(`Starting typewriter for ${element.id} with text: ${text}`);
      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          const timeout = setTimeout(type, speed);
          typingTimeouts.set(element, timeout);
        } else {
          typingTimeouts.delete(element);
          console.log(`Finished typewriter for ${element.id}`);
          if (callback) callback();
        }
      }
      type();
    }
  
    function stopTyping() {
      typingTimeouts.forEach((timeout) => clearTimeout(timeout));
      typingTimeouts.clear();
      [artworkNumber, artworkTitle, artworkYear, artworkType].forEach(el => {
        el.textContent = '';
      });
      console.log('Stopped all typing animations');
    }
  
    function updateArtwork() {
      stopTyping();
      const currentArtwork = artworks[currentIndex];
      totalArtworks.textContent = `${artworks.length}`;
      typeWriter(artworkNumber, `${currentIndex + 1}`, 50, () => {
        typeWriter(artworkTitle, currentArtwork.project || 'N/A', 50, () => {
          typeWriter(artworkYear, currentArtwork.year || 'N/A', 50, () => {
            typeWriter(artworkType, currentArtwork.type || 'N/A', 50);
          });
        });
      });
      description.textContent = currentArtwork.description || 'No description available';
      artworkImage.alt = currentArtwork.project || 'Artwork';
      artworkImage.style.animation = 'none';
      artworkImage.offsetHeight;
      artworkImage.style.animation = 'fadeIn 0.5s ease-in forwards';
      if (currentIndex === 0) {
        arrowLeft.classList.add('disabled');
        arrowLeftWrapper.classList.add('disabled');
        hoverLeft.style.cursor = 'default';
      } else {
        arrowLeft.classList.remove('disabled');
        arrowLeftWrapper.classList.remove('disabled');
        hoverLeft.style.cursor = 'pointer';
      }
      if (currentIndex === artworks.length - 1) {
        arrowRight.classList.add('disabled');
        arrowRightWrapper.classList.add('disabled');
        hoverRight.style.cursor = 'default';
      } else {
        arrowRight.classList.remove('disabled');
        arrowRightWrapper.classList.remove('disabled');
        hoverRight.style.cursor = 'pointer';
      }
      artworkSlider.value = currentIndex + 1;
      preloadImages();
      console.log('updateArtwork: Triggering adjustLayoutBasedOnDescription');
      adjustLayoutBasedOnDescription();
      adjustArtworkHeightAndScale();
    }
  
    arrowLeftWrapper.addEventListener('click', debouncedSwipeLeft);
    arrowRightWrapper.addEventListener('click', debouncedSwipeRight);
    hoverLeft.addEventListener('click', debouncedSwipeLeft);
    hoverRight.addEventListener('click', debouncedSwipeRight);
  
    async function fetchArtworks() {
      if (!mainContent.classList.contains('hidden')) {
        showSpinner();
        try {
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), 8000);
          const response = await fetch('https://sitoform25.onrender.com/api/artworks', {
            signal: controller.signal
          });
          clearTimeout(timeoutId);
          if (!response.ok) throw new Error('Failed to fetch artworks');
          artworks = await response.json();
  
          if (artworks.length === 0) {
            artworkDisplay.innerHTML = '<p>No artworks found.</p>';
            hideSpinner();
            hideProgress();
            return;
          }
  
          artworks = artworks.map((artwork, index) => ({
            number: index + 1,
            project: artwork.project,
            year: artwork.year,
            type: artwork.type,
            description: artwork.description,
            imageurl: artwork.imageurl
          }));
  
          totalArtworks.textContent = `${artworks.length}`;
          artworkSlider.max = artworks.length;
          artworkSlider.value = 1;
          currentIndex = 0;
  
          loadImageWithProgress(artworks[currentIndex].imageurl || 'https://via.placeholder.com/300?text=No+Image', () => {
            updateArtwork();
            preloadImages();
          });
        } catch (error) {
          console.error('Error fetching from API:', error);
          try {
            const response = await fetch('https://sitoform.com/data/artworks.json');
            const fallbackData = await response.json();
  
            if (fallbackData.length === 0) {
              artworkDisplay.innerHTML = '<p>No artworks found (fallback).</p>';
              hideSpinner();
              hideProgress();
              return;
            }
  
            artworks = fallbackData.map((artwork, index) => ({
              number: index + 1,
              project: artwork.project,
              year: artwork.year,
              type: artwork.type,
              description: artwork.description,
              imageurl: artwork.imageurl
            }));
  
            totalArtworks.textContent = `${artworks.length}`;
            artworkSlider.max = artworks.length;
            artworkSlider.value = 1;
            currentIndex = 0;
  
            loadImageWithProgress(artworks[currentIndex].imageurl || 'https://via.placeholder.com/300?text=No+Image', () => {
              updateArtwork();
              preloadImages();
            });
          } catch (fallbackError) {
            console.error('Error fetching fallback artworks.json:', fallbackError);
            artworkDisplay.innerHTML = '<p>Error loading artworks.</p>';
            hideSpinner();
            hideProgress();
          }
        }
      }
    }
  
    // No manual toggleContent call here
  </script>
</body>
</html>
